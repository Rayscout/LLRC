<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据报表 - iOS风格</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='ios_hr_style.css') }}">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <style>
        .ios-reports-hero { background: linear-gradient(135deg, var(--ios-bg-primary) 0%, var(--ios-bg-secondary) 100%); }
        .ios-overview-section { background: var(--ios-bg-secondary); }
        .ios-charts-section { background: var(--ios-bg-tertiary); }
        .ios-insights-section { background: var(--ios-bg-secondary); }
        
        .ios-report-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--ios-spacing-lg);
            margin-bottom: var(--ios-spacing-xl);
        }
        
        .ios-report-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: var(--ios-radius-large);
            padding: var(--ios-spacing-xl);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--ios-shadow-light);
            transition: all var(--ios-transition-medium);
        }
        
        .ios-report-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--ios-shadow-medium);
        }
        
        .ios-report-icon {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--ios-blue), var(--ios-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--ios-spacing-lg);
            color: white;
            font-size: 1.5rem;
        }
        
        .ios-report-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--ios-text-primary);
            margin: var(--ios-spacing-md) 0;
        }
        
        .ios-report-label {
            font-size: 1rem;
            color: var(--ios-text-secondary);
            margin-bottom: var(--ios-spacing-sm);
        }
        
        .ios-report-change {
            font-size: 0.875rem;
            color: var(--ios-green);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--ios-spacing-xs);
        }
        
        .ios-report-change.negative {
            color: var(--ios-red);
        }
        
        .ios-chart-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: var(--ios-radius-large);
            padding: var(--ios-spacing-xl);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--ios-shadow-medium);
            margin-bottom: var(--ios-spacing-xl);
        }
        
        .ios-chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--ios-spacing-lg);
            padding-bottom: var(--ios-spacing-md);
            border-bottom: 1px solid var(--ios-border-secondary);
        }
        
        .ios-chart-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--ios-text-primary);
            display: flex;
            align-items: center;
            gap: var(--ios-spacing-sm);
        }
        
        .ios-chart-actions {
            display: flex;
            gap: var(--ios-spacing-sm);
        }
        
        .ios-chart-btn {
            background: var(--ios-bg-tertiary);
            border: 1px solid var(--ios-border-primary);
            border-radius: var(--ios-radius-small);
            padding: var(--ios-spacing-xs) var(--ios-spacing-sm);
            color: var(--ios-text-secondary);
            cursor: pointer;
            transition: all var(--ios-transition-fast);
            font-size: 0.75rem;
        }
        
        .ios-chart-btn:hover {
            background: var(--ios-blue);
            color: white;
            border-color: var(--ios-blue);
        }
        
        .ios-chart-placeholder {
            height: 300px;
            background: linear-gradient(135deg, var(--ios-bg-tertiary), var(--ios-bg-secondary));
            border-radius: var(--ios-radius-medium);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--ios-text-tertiary);
            font-size: 1.125rem;
            flex-direction: column;
            gap: var(--ios-spacing-md);
        }
        
        .ios-funnel-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            height: 300px;
            padding: var(--ios-spacing-lg) 0;
        }
        
        .ios-funnel-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--ios-spacing-sm);
            flex: 1;
            max-width: 120px;
        }
        
        .ios-funnel-bar {
            width: 100%;
            background: linear-gradient(135deg, var(--ios-blue), var(--ios-purple));
            border-radius: var(--ios-radius-small);
            transition: all var(--ios-transition-medium);
            position: relative;
        }
        
        .ios-funnel-bar:hover {
            transform: scale(1.05);
        }
        
        .ios-funnel-label {
            font-size: 0.875rem;
            color: var(--ios-text-secondary);
            text-align: center;
        }
        
        .ios-funnel-value {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--ios-text-primary);
        }
        
        .ios-insight-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: var(--ios-radius-large);
            padding: var(--ios-spacing-lg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--ios-shadow-light);
            transition: all var(--ios-transition-medium);
        }
        
        .ios-insight-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--ios-shadow-medium);
        }
        
        .ios-insight-header {
            display: flex;
            align-items: center;
            gap: var(--ios-spacing-sm);
            margin-bottom: var(--ios-spacing-md);
        }
        
        .ios-insight-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--ios-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
        }
        
        .ios-insight-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--ios-text-primary);
        }
        
        .ios-insight-content {
            color: var(--ios-text-secondary);
            line-height: 1.6;
            font-size: 0.875rem;
        }
        
        .ios-quick-actions {
            display: flex;
            gap: var(--ios-spacing-md);
            justify-content: center;
            margin-bottom: var(--ios-spacing-xl);
            flex-wrap: wrap;
        }
        
        .ios-quick-action-btn {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid var(--ios-border-primary);
            border-radius: var(--ios-radius-medium);
            padding: var(--ios-spacing-md) var(--ios-spacing-lg);
            color: var(--ios-text-secondary);
            text-decoration: none;
            transition: all var(--ios-transition-medium);
            display: flex;
            align-items: center;
            gap: var(--ios-spacing-sm);
        }
        
        .ios-quick-action-btn:hover {
            background: var(--ios-blue);
            color: white;
            border-color: var(--ios-blue);
            transform: translateY(-2px);
        }
        
        .ios-quick-action-btn.primary {
            background: var(--ios-blue);
            color: white;
            border-color: var(--ios-blue);
        }
        
        .ios-quick-action-btn.primary:hover {
            background: var(--ios-blue-dark);
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="ios-nav">
        <div class="ios-nav-container">
            <a href="{{ url_for('smartrecruit.hr.dashboard.hr_dashboard') }}" class="ios-nav-brand">
                <div class="ios-nav-brand-icon">
                    <i class="uil uil-briefcase"></i>
                </div>
                <span>HR智能招聘</span>
            </a>
            
            <ul class="ios-nav-menu">
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.dashboard.hr_dashboard') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.dashboard.hr_dashboard' else '' }}">
                        <i class="ios-nav-icon uil uil-dashboard"></i>
                        <span class="ios-nav-text">仪表板</span>
                    </a>
                </li>
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.recruitment.publish_recruitment') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.recruitment.publish_recruitment' else '' }}">
                        <i class="ios-nav-icon uil uil-briefcase"></i>
                        <span class="ios-nav-text">发布职位</span>
                    </a>
                </li>
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.dashboard.candidates') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.dashboard.candidates' else '' }}">
                        <i class="ios-nav-icon uil uil-users-alt"></i>
                        <span class="ios-nav-text">候选人</span>
                    </a>
                </li>
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.recruitment.my_jobs') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.recruitment.my_jobs' else '' }}">
                        <i class="ios-nav-icon uil uil-briefcase-alt"></i>
                        <span class="ios-nav-text">我的职位</span>
                    </a>
                </li>
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.dashboard.interviews') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.dashboard.interviews' else '' }}">
                        <i class="ios-nav-icon uil uil-calendar-alt"></i>
                        <span class="ios-nav-text">面试</span>
                    </a>
                </li>
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.dashboard.reports') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.dashboard.reports' else '' }}">
                        <i class="ios-nav-icon uil uil-chart-pie"></i>
                        <span class="ios-nav-text">报表</span>
                    </a>
                </li>
                <li class="ios-nav-item">
                    <a href="{{ url_for('smartrecruit.hr.dashboard.insights') }}" class="ios-nav-link {{ 'active' if request.endpoint == 'smartrecruit.hr.dashboard.insights' else '' }}">
                        <i class="ios-nav-icon uil uil-lightbulb"></i>
                        <span class="ios-nav-text">AI洞察</span>
                    </a>
                </li>
            </ul>
            
            <div class="ios-nav-actions">
                <div class="ios-nav-search">
                    <i class="uil uil-search"></i>
                    <input type="text" placeholder="搜索..." />
                </div>
                
                <div class="ios-nav-divider"></div>
                
                <button class="ios-nav-button secondary" data-action="notifications">
                    <i class="uil uil-bell"></i>
                    <span class="ios-nav-badge">3</span>
                </button>
                
                <button class="ios-nav-button" data-action="profile">
                    <i class="uil uil-user"></i>
                    <span>HR</span>
                </button>
            </div>
            
            <!-- 移动端菜单切换按钮 -->
            <button class="ios-nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="ios-parallax-bg"></div>
    
    <div class="ios-scroll-container">
        <!-- 欢迎Section -->
        <section class="ios-section ios-reports-hero">
            <div class="ios-container">
                <h1 class="ios-title ios-fade-in">数据报表</h1>
                <p class="ios-subtitle ios-fade-in">深度分析招聘数据，优化招聘策略，提升招聘效果</p>
                
                <div class="ios-quick-actions ios-fade-in-up">
                    <button class="ios-quick-action-btn primary" onclick="exportReport()">
                        <i class="uil uil-export"></i>
                        导出报表
                    </button>
                    <button class="ios-quick-action-btn" onclick="refreshData()">
                        <i class="uil uil-refresh"></i>
                        刷新数据
                    </button>
                    <a href="{{ url_for('smartrecruit.hr.dashboard.insights') }}" class="ios-quick-action-btn">
                        <i class="uil uil-lightbulb"></i>
                        AI洞察
                    </a>
                </div>
            </div>
        </section>

        <!-- 概览数据Section -->
        <section class="ios-section ios-overview-section">
            <div class="ios-container">
                <h2 class="ios-title ios-fade-in">关键指标</h2>
                <p class="ios-subtitle ios-fade-in">实时监控招聘流程的核心数据</p>
                
                <div class="ios-report-overview">
                    <div class="ios-report-card ios-fade-in-up">
                        <div class="ios-report-icon">
                            <i class="uil uil-briefcase-alt"></i>
                        </div>
                        <div class="ios-report-label">总职位数</div>
                        <div class="ios-report-value">{{ report_data.total_jobs|default(0) }}</div>
                        <div class="ios-report-change">
                            <i class="uil uil-arrow-up"></i>
                            +12% 本月
                        </div>
                    </div>
                    
                    <div class="ios-report-card ios-fade-in-up">
                        <div class="ios-report-icon">
                            <i class="uil uil-file-alt"></i>
                        </div>
                        <div class="ios-report-label">总申请数</div>
                        <div class="ios-report-value">{{ report_data.total_applications|default(0) }}</div>
                        <div class="ios-report-change">
                            <i class="uil uil-arrow-up"></i>
                            +8% 本周
                        </div>
                    </div>
                    
                    <div class="ios-report-card ios-fade-in-up">
                        <div class="ios-report-icon">
                            <i class="uil uil-chart-line"></i>
                        </div>
                        <div class="ios-report-label">平均招聘周期</div>
                        <div class="ios-report-value">{{ report_data.recruitment_cycle|default(30) }}天</div>
                        <div class="ios-report-change negative">
                            <i class="uil uil-arrow-down"></i>
                            -5% 本月
                        </div>
                    </div>
                    
                    <div class="ios-report-card ios-fade-in-up">
                        <div class="ios-report-icon">
                            <i class="uil uil-check-circle"></i>
                        </div>
                        <div class="ios-report-label">Offer接受率</div>
                        <div class="ios-report-value">{{ report_data.offer_acceptance_rate|default(0) }}%</div>
                        <div class="ios-report-change">
                            <i class="uil uil-arrow-up"></i>
                            +3% 本月
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 图表分析Section -->
        <section class="ios-section ios-charts-section">
            <div class="ios-container">
                <h2 class="ios-title ios-fade-in">数据可视化</h2>
                <p class="ios-subtitle ios-fade-in">通过图表直观了解招聘趋势和效果</p>
                
                <div class="ios-chart-container ios-fade-in-up">
                    <div class="ios-chart-header">
                        <div class="ios-chart-title">
                            <i class="uil uil-chart-line"></i>
                            申请趋势分析
                        </div>
                        <div class="ios-chart-actions">
                            <button class="ios-chart-btn" onclick="changeChartPeriod('week')">周</button>
                            <button class="ios-chart-btn active" onclick="changeChartPeriod('month')">月</button>
                            <button class="ios-chart-btn" onclick="changeChartPeriod('quarter')">季</button>
                        </div>
                    </div>
                    <div class="ios-chart-placeholder">
                        <i class="uil uil-chart-line" style="font-size: 3rem; opacity: 0.5;"></i>
                        <p>申请趋势图表</p>
                        <p style="font-size: 0.875rem; opacity: 0.7;">显示申请数量随时间的变化趋势</p>
                    </div>
                </div>
                
                <div class="ios-chart-container ios-fade-in-up">
                    <div class="ios-chart-header">
                        <div class="ios-chart-title">
                            <i class="uil uil-chart-pie"></i>
                            招聘漏斗分析
                        </div>
                        <div class="ios-chart-actions">
                            <button class="ios-chart-btn" onclick="exportFunnelData()">导出数据</button>
                        </div>
                    </div>
                    <div class="ios-funnel-container">
                        <div class="ios-funnel-stage">
                            <div class="ios-funnel-bar" style="height: 80%;" title="申请阶段"></div>
                            <div class="ios-funnel-label">申请</div>
                            <div class="ios-funnel-value">{{ report_data.funnel_data.applied|default(0) }}</div>
                        </div>
                        <div class="ios-funnel-stage">
                            <div class="ios-funnel-bar" style="height: 60%;" title="筛选阶段"></div>
                            <div class="ios-funnel-label">筛选</div>
                            <div class="ios-funnel-value">{{ report_data.funnel_data.screened|default(0) }}</div>
                        </div>
                        <div class="ios-funnel-stage">
                            <div class="ios-funnel-bar" style="height: 40%;" title="面试阶段"></div>
                            <div class="ios-funnel-label">面试</div>
                            <div class="ios-funnel-value">{{ report_data.funnel_data.interview|default(0) }}</div>
                        </div>
                        <div class="ios-funnel-stage">
                            <div class="ios-funnel-bar" style="height: 25%;" title="Offer阶段"></div>
                            <div class="ios-funnel-label">Offer</div>
                            <div class="ios-funnel-value">{{ report_data.funnel_data.offer|default(0) }}</div>
                        </div>
                        <div class="ios-funnel-stage">
                            <div class="ios-funnel-bar" style="height: 15%;" title="入职阶段"></div>
                            <div class="ios-funnel-label">入职</div>
                            <div class="ios-funnel-value">{{ report_data.funnel_data.hired|default(0) }}</div>
                        </div>
                    </div>
                </div>
                
                <div class="ios-chart-container ios-fade-in-up">
                    <div class="ios-chart-header">
                        <div class="ios-chart-title">
                            <i class="uil uil-users-alt"></i>
                            团队绩效分析
                        </div>
                        <div class="ios-chart-actions">
                            <button class="ios-chart-btn" onclick="viewTeamDetails()">查看详情</button>
                        </div>
                    </div>
                    <div class="ios-chart-placeholder">
                        <i class="uil uil-users-alt" style="font-size: 3rem; opacity: 0.5;"></i>
                        <p>团队绩效图表</p>
                        <p style="font-size: 0.875rem; opacity: 0.7;">显示各招聘人员的绩效表现</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 智能洞察Section -->
        <section class="ios-section ios-insights-section">
            <div class="ios-container">
                <h2 class="ios-title ios-fade-in">智能洞察</h2>
                <p class="ios-subtitle ios-fade-in">基于数据分析的招聘建议和趋势预测</p>
                
                <div class="ios-grid ios-grid-2">
                    <div class="ios-insight-card ios-fade-in-up">
                        <div class="ios-insight-header">
                            <div class="ios-insight-icon">
                                <i class="uil uil-lightbulb"></i>
                            </div>
                            <div class="ios-insight-title">招聘效率提升</div>
                        </div>
                        <div class="ios-insight-content">
                            根据数据分析，建议优化面试流程，将平均招聘周期从{{ report_data.recruitment_cycle|default(30) }}天缩短至25天。重点关注技术岗位的筛选效率。
                        </div>
                    </div>
                    
                    <div class="ios-insight-card ios-fade-in-up">
                        <div class="ios-insight-header">
                            <div class="ios-insight-icon">
                                <i class="uil uil-chart-line"></i>
                            </div>
                            <div class="ios-insight-title">申请质量分析</div>
                        </div>
                        <div class="ios-insight-content">
                            本月申请质量较上月提升15%，建议增加相关职位的推广力度。前端开发岗位申请量增长最快，可考虑增加招聘名额。
                        </div>
                    </div>
                    
                    <div class="ios-insight-card ios-fade-in-up">
                        <div class="ios-insight-header">
                            <div class="ios-insight-icon">
                                <i class="uil uil-clock"></i>
                            </div>
                            <div class="ios-insight-title">最佳招聘时机</div>
                        </div>
                        <div class="ios-insight-content">
                            数据显示，每周二和周四的申请量最高，建议在这些时间发布新职位。春季和秋季是招聘的黄金期，可提前规划招聘计划。
                        </div>
                    </div>
                    
                    <div class="ios-insight-card ios-fade-in-up">
                        <div class="ios-insight-header">
                            <div class="ios-insight-icon">
                                <i class="uil uil-target-lock"></i>
                            </div>
                            <div class="ios-insight-title">成本优化建议</div>
                        </div>
                        <div class="ios-insight-content">
                            当前招聘成本为{{ report_data.recruitment_cost|default(0) }}元，建议通过优化面试流程和提升筛选效率，将成本控制在预算范围内。
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>    <script src="{{ url_for('static', filename='ios_hr_script.js') }}"></script>
    
    <script>
        // 数据报表相关JavaScript功能
        
        function exportReport() {
            alert('报表导出功能开发中...');
        }
        
        function refreshData() {
            alert('数据刷新功能开发中...');
            // 这里可以实现数据刷新逻辑
        }
        
        function changeChartPeriod(period) {
            // 更新图表周期按钮状态
            document.querySelectorAll('.ios-chart-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // 这里可以实现切换图表周期的逻辑
            console.log('切换到图表周期:', period);
        }
        
        function exportFunnelData() {
            alert('漏斗数据导出功能开发中...');
        }
        
        function viewTeamDetails() {
            alert('团队详情查看功能开发中...');
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 设置默认的图表周期按钮状态
            const monthBtn = document.querySelector('.ios-chart-btn[onclick*="month"]');
            if (monthBtn) {
                monthBtn.classList.add('active');
            }
            
            console.log('数据报表页面已加载');
        });
    </script>
</body>
</html>
