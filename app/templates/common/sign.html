<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>智能招聘与人才发展系统</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='auth_sign.css') }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
         <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
     <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet" />
         <style>
         .alert-container{position:fixed;top:10px;left:50%;transform:translateX(-50%);width:90%;max-width:500px;z-index:1000}
         .alert{padding:12px 14px;margin:8px 0;border-radius:10px;color:#fff;display:flex;align-items:center;box-shadow:0 4px 12px rgba(0,0,0,.12)}
         .alert.alert-danger{background:#dc3545}
         .alert.alert-success{background:#1a9d1a}
         .alert.alert-info{background:#2563eb}
         .hero-bg{background-image:url("{{ url_for('static', filename='Images/background.jpg') }}");}
         .site-header .brand{display:flex;align-items:center;gap:10px}
         .site-header .brand .brand-text{color:#5fa9a6;font-weight:800;font-style:italic;font-size:22px;font-family:'Ma Shan Zheng','KaiTi','STKaiti','Microsoft YaHei',sans-serif}
         .tile-body h3{color:#111827 !important;font-weight:600}
         .tile-body p{color:#374151 !important;line-height:1.5}
         .tile{background:#ffffff !important;border:1px solid #e5e7eb !important}
         /* Hero image responsive fit */
         .hero .hero-content{align-items:center}
         .hero-right{display:flex;justify-content:center}
         .hero-right .avatar{width:min(48vw,520px);aspect-ratio:1/1;border-radius:999px;overflow:hidden;position:relative;background:transparent;border:6px solid rgba(96,165,250,.35);box-shadow:0 20px 60px rgba(0,0,0,.12), 0 0 0 18px rgba(96,165,250,.18), 0 0 0 36px rgba(96,165,250,.08)}
         .hero-right .avatar img{width:100%;height:100%;object-fit:cover;object-position:center;display:block;border-radius:999px}
         @media(max-width:991.98px){
             .hero-right .avatar{width:min(70vw,380px);box-shadow:0 16px 44px rgba(0,0,0,.1), 0 0 0 14px rgba(96,165,250,.16), 0 0 0 28px rgba(96,165,250,.07)}
         }
     </style>
</head>
<body>
    <!-- Flash Messages -->
    <div class="alert-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>
    
    <!-- Header (from 模板.html) -->
    <header class="site-header">
        <div class="container header-inner">
                         <a href="#home" class="brand" data-scroll>
                 <img src="https://mcp-media.8n6n.com/img/2025/08/20/c0ce9b147f51df7246a8d9ffb6a64012" alt="IRTDS Logo" />
                 <span class="brand-text">IRTDS</span>
             </a>
            <nav class="nav md-nav" aria-label="Primary">
                <button class="nav-toggle" aria-label="Toggle menu" aria-expanded="false" id="navToggle">☰</button>
                <ul class="nav-list" id="navList">
                    <li><a href="#home" data-scroll data-section="home">主页</a></li>
                    <li><a href="#services" data-scroll data-section="services">方案</a></li>
                    <li><a href="#portfolio" data-scroll data-section="portfolio">产品</a></li>
                    <li><a href="#skills" data-scroll data-section="skills">能力</a></li>
                    <li><a href="#testimonials" data-scroll data-section="testimonials">合作</a></li>
                    <li><a href="#contact" data-scroll data-section="contact">联系</a></li>
                    <li class="hire"><a href="#" class="auth-trigger" data-auth="signin">登录</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        

        <!-- 其余展示区块可按需保留，保持模板结构 -->
        <section id="services" class="section">
            <style>
            /* 散开图标 + 中央渐显文字区块样式 */
            .scatter-wrap{position:relative; height:100vh; min-height:560px; overflow:hidden; border-radius:0; background:linear-gradient(180deg, rgba(99,102,241,0.04), rgba(59,130,246,0.04)); box-shadow:0 10px 40px rgba(0,0,0,.06); width:100vw; left:50%; transform:translateX(-50%); opacity:0; transition:opacity .6s ease; margin-top:-1cm;
            --center-shift-y: 190px;}
            .scatter-wrap.ready{opacity:1}
            .scatter-center{position:absolute; left:50%; top:calc(50% - var(--center-shift-y)); transform:translate(-50%,-50%) translateY(3cm) scale(.92); text-align:center; pointer-events:none; opacity:0; transition:opacity .8s cubic-bezier(.25,1,.5,1), transform .8s cubic-bezier(.25,1,.5,1)}
            .scatter-center h2{margin:0; font-size:44px; line-height:1.12; letter-spacing:.2px}
            .scatter-center h2 span{font-weight:800}
            .scatter-center .big-line{display:inline-block; transform-origin:left center; font-size:66px; position:relative; top:2cm}
            @media(min-width:992px){ .scatter-center .big-line{font-size:72px} }
            /* 动视效果：微缩放+上浮位移（进入/循环） */
            .mv{animation:mvPulse 3.2s cubic-bezier(.25,1,.5,1) infinite}
            .mv.delay{animation-delay:.6s}
            @keyframes mvPulse{0%{transform:translateY(2px) scale(1)}40%{transform:translateY(-4px) scale(1.05)}60%{transform:translateY(-2px) scale(1.03)}100%{transform:translateY(2px) scale(1)}}
            .scatter-icons{position:absolute; left:50%; top:calc(50% - var(--center-shift-y)); width:0; height:0}
            .scatter-icon{position:absolute; left:0; top:0; width:88px; height:88px; border-radius:20px; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,.12); transform:translate(-50%,-50%) scale(0.9); transition:box-shadow .3s ease; cursor:pointer}
            .scatter-icon img{width:100%; height:100%; object-fit:cover; animation:breathe 3.6s ease-in-out infinite}
            /* 点击波纹 */
            .click-ripple{position:absolute; left:50%; top:50%; width:10px; height:10px; transform:translate(-50%,-50%) scale(0); border-radius:999px; background:rgba(96,165,250,.35); pointer-events:none; animation:ripple 700ms ease-out forwards}
            @keyframes ripple{0%{opacity:.55; transform:translate(-50%,-50%) scale(0)}70%{opacity:.18; transform:translate(-50%,-50%) scale(6)}100%{opacity:0; transform:translate(-50%,-50%) scale(8)}}
            @keyframes breathe{0%,100%{transform:scale(1);opacity:.96}50%{transform:scale(1.04);opacity:1}}
            @media(min-width:992px){ .scatter-icon{width:104px; height:104px} .scatter-center h2{font-size:56px} .scatter-wrap{ --center-shift-y: 210px; } }
            </style>
            <div class="container">
                <div id="scatterSection" class="scatter-wrap mt-12">
                    <div class="scatter-icons" aria-hidden="true">
                        <div class="scatter-icon" data-idx="0"><img src="https://mcp-media.8n6n.com/img/2025/04/17/39f459b938fc69dd692a70065b99dde9" alt="icon1"></div>
                        <div class="scatter-icon" data-idx="1"><img src="https://mcp-media.8n6n.com/img/2025/04/17/340465a65d6bf4196d5c9fb6292df646" alt="icon2"></div>
                        <div class="scatter-icon" data-idx="2"><img src="https://mcp-media.8n6n.com/img/2025/04/17/39f459b938fc69dd692a70065b99dde9" alt="icon3"></div>
                        <div class="scatter-icon" data-idx="3"><img src="https://mcp-media.8n6n.com/img/2025/04/17/b491a9f66ccc9c0874a9595550781560" alt="icon4"></div>
                        <div class="scatter-icon" data-idx="4"><img src="https://mcp-media.8n6n.com/img/2025/04/17/0fef9599e406e3435d8e7155ec0706da" alt="icon5"></div>
                        <div class="scatter-icon" data-idx="5"><img src="https://mcp-media.8n6n.com/img/2025/04/17/01b44253c4e46378709e1d20ca2dd303" alt="icon6"></div>
                        <div class="scatter-icon" data-idx="6"><img src="https://mcp-media.8n6n.com/img/2025/04/17/88c86e4e311ff44450d3fd7382ce56e8" alt="icon7"></div>
                        <div class="scatter-icon" data-idx="7"><img src="https://mcp-media.8n6n.com/img/2025/04/18/ec4fcbab6c55265d5ebcfdca4632702c" alt="icon8"></div>
                        <div class="scatter-icon" data-idx="8"><img src="https://mcp-media.8n6n.com/img/2025/04/17/5b82dab72493da6628b56d8f5f823be8" alt="icon9"></div>
                        <div class="scatter-icon" data-idx="9"><img src="https://mcp-media.8n6n.com/img/2025/04/17/a0943644097d75d3e1763c24a4a9c6e8" alt="icon10"></div>
                        <div class="scatter-icon" data-idx="10"><img src="https://mcp-media.8n6n.com/img/2025/04/18/0a684cb6d685abeebae8f1ef938ea8e7" alt="icon11"></div>
                        <div class="scatter-icon" data-idx="11"><img src="https://mcp-media.8n6n.com/img/2025/04/20/02b050475e70e00996b237db752d810d" alt="icon12"></div>
                        <div class="scatter-icon" data-idx="12"><img src="https://mcp-media.8n6n.com/img/2025/05/02/234129e2329a2504771400ba45eb0617" alt="icon13"></div>
                        <div class="scatter-icon" data-idx="13"><img src="https://mcp-media.8n6n.com/img/2025/05/02/969af67a70f2aab9602500509ea4e398" alt="icon14"></div>
                        <div class="scatter-icon" data-idx="14"><img src="https://mcp-media.8n6n.com/img/2025/05/02/9023b4476de07c898e026e9c0756de4a" alt="icon15"></div>
                        <div class="scatter-icon" data-idx="15"><img src="https://mcp-media.8n6n.com/img/2025/05/03/f90736e24a73ff06b0ec12a306a1911a" alt="icon16"></div>
                    </div>
                    <div class="scatter-center" id="scatterCenter">
                        <h2>
                            <span>Intelligent</span><br/>
                            <span class="big-line mv">RECRUITMENT &</span><br/>
                            <span class="big-line mv delay">Talent Development</span>
                        </h2>
                    </div>
                </div>
            </div>
        </section>

        <!-- Hero moved below scatter section -->
        <section id="home" class="section hero">
            <div class="hero-bg"></div>
            <div class="container hero-content">
                <div class="hero-left">
                    <h1>基于 AI 的智能招聘与人才发展系统</h1>
                    <p>面向企业与高校提供智能招聘、人岗匹配、人才画像与测评、培训发展与数据看板的一体化解决方案。</p>
                    <div class="hero-actions">
                        <a class="btn btn-primary auth-trigger" href="#" data-auth="signin">登录 <span class="icon">→</span></a>
                        <a class="btn btn-ghost auth-trigger" href="#" data-auth="signup">注册</a>
                    </div>
                </div>
                <div class="hero-right">
                    <div class="avatar">
                                                 <img src="{{ url_for('static', filename='Images/logo.png') }}" alt="Logo" />
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio (minimal for script hooks) -->
        <section id="portfolio" class="section section-alt">
            <div class="container">
                <div class="section-head">
                    <span class="pill">产品模块</span>
                    <h2>核心能力一览</h2>
                    <p class="muted">覆盖“招聘、匹配、测评、发展、数据、集成”等模块。</p>
                </div>
                <div class="tabs mt-12" role="tablist" aria-label="Portfolio filter">
                    <button class="tab active" data-filter="all" aria-selected="true">全部</button>
                    <button class="tab" data-filter="recruit">招聘</button>
                    <button class="tab" data-filter="match">匹配</button>
                    <button class="tab" data-filter="assess">测评</button>
                    <button class="tab" data-filter="develop">发展</button>
                    <button class="tab" data-filter="data">数据</button>
                    <button class="tab" data-filter="integration">集成</button>
                </div>
                <div class="grid grid-3 mt-8" id="portfolioGrid">
                    <article class="tile" data-category="recruit">
                                                 <div class="media"><img src="{{ url_for('static', filename='Images/q1.jpg') }}" alt="智能招聘引擎" /></div>
                        <div class="tile-body">
                            <h3>智能招聘引擎</h3>
                            <p>职位多平台一键分发、简历解析与意向识别，自动预筛候选人并聚合人才库。</p>
                            <div class="actions">
                                                                 <button class="btn btn-outline" data-details data-title="智能招聘引擎" data-img="{{ url_for('static', filename='Images/q1.jpg') }}" data-desc="支持多平台职位一键发布、简历结构化解析、意向识别与去重。自动化预筛候选，统一沉淀到人才库并可复用。" data-link="#">了解详情</button>
                            </div>
                        </div>
                    </article>
                    <article class="tile" data-category="match">
                         <div class="media"><img src="{{ url_for('static', filename='Images/q2.jpg') }}" alt="人岗匹配" /></div>
                        <div class="tile-body">
                            <h3>人岗匹配</h3>
                            <p>向量检索 + 知识图谱，给出匹配度评分、解释与相似人选推荐。</p>
                            <div class="actions">
                                                                 <button class="btn btn-outline" data-details data-title="人岗匹配" data-img="{{ url_for('static', filename='Images/q2.jpg') }}" data-desc="结合职位画像与人才画像，采用向量检索/重排与知识图谱规则，输出可解释的匹配度、关键命中点与相似候选推荐。" data-link="#">了解详情</button>
                            </div>
                        </div>
                    </article>
                    <article class="tile" data-category="assess">
                         <div class="media"><img src="{{ url_for('static', filename='Images/q3.jpg') }}" alt="人才画像与测评" /></div>
                        <div class="tile-body">
                            <h3>人才画像与测评</h3>
                            <p>整合量表与面试问答，输出可视化画像、胜任力评估与风险提示。</p>
                            <div class="actions">
                                                                 <button class="btn btn-outline" data-details data-title="人才画像与测评" data-img="{{ url_for('static', filename='Images/q3.jpg') }}" data-desc="融合在线量表、结构化面试与多模态要素，生成可视化人才画像与胜任力评估，并给出风险与提升建议。" data-link="#">了解详情</button>
                            </div>
                        </div>
                    </article>
                    <article class="tile" data-category="develop">
                         <div class="media"><img src="{{ url_for('static', filename='Images/q4.jpg') }}" alt="培训与发展" /></div>
                        <div class="tile-body">
                            <h3>培训与发展</h3>
                            <p>个性化学习路径与岗位能力地图，支撑人才发展与组织升级。</p>
                            <div class="actions">
                                                                 <button class="btn btn-outline" data-details data-title="培训与发展" data-img="{{ url_for('static', filename='Images/q4.jpg') }}" data-desc="依据岗位能力模型与画像差距，自动推荐个性化学习路径；结合能力地图与学习记录，持续跟踪成长。" data-link="#">了解详情</button>
                            </div>
                        </div>
                    </article>
                    <article class="tile" data-category="data">
                         <div class="media"><img src="{{ url_for('static', filename='Images/q5.jpg') }}" alt="数据看板" /></div>
                        <div class="tile-body">
                            <h3>数据看板</h3>
                            <p>招聘漏斗、用工效率、留任与流失预警，多维报表助力经营与人效提升。</p>
                            <div class="actions">
                                                                 <button class="btn btn-outline" data-details data-title="数据看板" data-img="{{ url_for('static', filename='Images/q5.jpg') }}" data-desc="提供招聘漏斗、入转离、效率与成本等指标看板，支持维度钻取、预警与导出，沉淀组织管理洞察。" data-link="#">了解详情</button>
                            </div>
                        </div>
                    </article>
                    <article class="tile" data-category="integration">
                         <div class="media"><img src="{{ url_for('static', filename='Images/q6.jpg') }}" alt="集成与 API" /></div>
                        <div class="tile-body">
                            <h3>集成与 API</h3>
                            <p>开放 API 与 Webhook，支持与 HR 系统、企业微信、钉钉与单点登录集成。</p>
                            <div class="actions">
                                                                 <button class="btn btn-outline" data-details data-title="集成与 API" data-img="{{ url_for('static', filename='Images/q6.jpg') }}" data-desc="提供标准化 REST API 与 Webhook 事件，覆盖组织、职位、候选、流程与单点登录，轻松打通现有 HR/IM/SSO 系统。" data-link="#">了解详情</button>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
            <!-- Modal needed by script.js -->
            <div class="modal" id="detailsModal" aria-hidden="true" role="dialog" aria-modal="true">
                <div class="modal-backdrop" data-modal-close></div>
                <div class="modal-dialog" role="document">
                    <button class="modal-close" aria-label="Close" data-modal-close>✕</button>
                    <h3 id="modalTitle"></h3>
                    <p id="modalDesc" class="muted"></p>
                    <div class="modal-media"><img id="modalImg" alt="" /></div>
                    <div class="modal-actions">
                        <a id="modalLink" class="btn btn-primary" target="_blank" rel="noopener noreferrer">访问链接</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials (minimal for script hooks) -->
        <section id="testimonials" class="section">
            <div class="container">
                <div class="section-head">
                    <span class="pill">合作与认可</span>
                    <h2>伙伴怎么说</h2>
                    <p class="muted">来自合作伙伴的反馈。</p>
                </div>
                <div class="slider mt-12" data-slider>
                    <div class="slider-track" id="testimonialTrack">
                        <article class="t-card"><div class="t-head"><div><div class="t-name">林理人才</div><div class="t-meta muted">团队</div></div></div><div class="t-stars">★★★★★</div><p class="t-content">智能招聘助力用人决策。</p></article>
                        <article class="t-card"><div class="t-head"><div><div class="t-name">合作伙伴</div><div class="t-meta muted">企业</div></div></div><div class="t-stars">★★★★★</div><p class="t-content">开放 API 易于集成。</p></article>
                        <article class="t-card"><div class="t-head"><div><div class="t-name">高校</div><div class="t-meta muted">教育</div></div></div><div class="t-stars">★★★★★</div><p class="t-content">人才画像与测评一体化。</p></article>
                    </div>
                    <div class="slider-actions">
                        <button class="btn btn-outline" id="prevTestimonials" aria-label="Previous">←</button>
                        <button class="btn btn-outline" id="nextTestimonials" aria-label="Next">→</button>
        </div>
                </div>
            </div>
        </section>

        <!-- Skills -->
        <section id="skills" class="section">
            <div class="container">
                <div class="section-head">
                    <span class="pill">技术能力</span>
                    <h2>我们的技术栈</h2>
                    <p class="muted">面向真实业务场景的工程化 AI：NLP/LLM、向量检索、知识图谱、多模态与 MLOps。</p>
                </div>
                <div class="grid grid-2 mt-12">
                    <div>
                        <h3 class="h4">AI 能力</h3>
                        <div class="skills">
                            <div class="skill"><div class="label"><span>NLP/LLM 微调</span><span>90%</span></div><div class="bar" data-value="90"></div></div>
                            <div class="skill"><div class="label"><span>向量检索/重排</span><span>88%</span></div><div class="bar" data-value="88"></div></div>
                            <div class="skill"><div class="label"><span>知识图谱/规则</span><span>82%</span></div><div class="bar" data-value="82"></div></div>
                            <div class="skill"><div class="label"><span>多模态问答</span><span>80%</span></div><div class="bar" data-value="80"></div></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="h4">工程能力</h3>
                        <div class="skills">
                            <div class="skill"><div class="label"><span>Web 全栈</span><span>92%</span></div><div class="bar" data-value="92"></div></div>
                            <div class="skill"><div class="label"><span>数据工程/MLOps</span><span>85%</span></div><div class="bar" data-value="85"></div></div>
                            <div class="skill"><div class="label"><span>可观测性/性能</span><span>82%</span></div><div class="bar" data-value="82"></div></div>
                            <div class="skill"><div class="label"><span>安全合规/隐私</span><span>80%</span></div><div class="bar" data-value="80"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Contact -->
    <section id="contact" class="section">
        <div class="container">
            <div class="section-head">
                <span class="pill">联系</span>
                <h2>取得联系</h2>
                <p class="muted">欢迎交流合作与试用事宜，我们将尽快与您联系。</p>
            </div>
            <div class="grid grid-3 mt-12">
                <article class="info-card">
                    <div class="icon-badge">📞</div>
                    <h3>电话</h3>
                    <a href="tel:+8613800000000" class="link">+86 138 0000 0000</a>
                    <p class="muted">工作日 9:00 - 18:00</p>
                </article>
                <article class="info-card">
                    <div class="icon-badge">✉️</div>
                    <h3>邮箱</h3>
                    <a href="mailto:contact@ll-talent.cn" class="link">contact@ll-talent.cn</a>
                    <p class="muted">24 小时内回复</p>
                </article>
                <article class="info-card">
                    <div class="icon-badge">📍</div>
                    <h3>地址</h3>
                    <p class="muted">北京市 海淀区（示例）</p>
                    <p class="muted">支持全国远程与本地化服务</p>
                </article>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container footer-inner">
            <div class="left">
                <a class="brand" href="#home" data-scroll><img src="https://mcp-media.8n6n.com/img/2025/08/20/c0ce9b147f51df7246a8d9ffb6a64012" alt="林理人才开发团队" /></a>
                <p class="muted">© <span id="year"></span> 林理人才开发团队（北京林业大学）. 保留所有权利.</p>
            </div>
            <div class="socials">
                <a href="#" aria-label="Twitter">🐦</a>
                <a href="#" aria-label="Instagram">📷</a>
                <a href="#" aria-label="GitHub">💻</a>
                <a href="#" aria-label="LinkedIn">🔗</a>
                <a href="#" aria-label="Facebook">📘</a>
            </div>
        </div>
    </footer>

    <!-- 登录/注册弹窗（表单已改为与后端一致） -->
    <div class="modal" id="authModal" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="modal-backdrop" data-modal-close></div>
        <div class="modal-dialog" role="document" style="padding:0;overflow:hidden">
            <button class="modal-close" aria-label="Close" data-modal-close>✕</button>
            <div style="display:flex;height:560px">
                <!-- 左侧介绍 -->
                <aside style="flex:1;height:100%;padding:40px;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff">
                    <div class="left-signup" style="text-align:center">
                        <h2 style="font-size:32px;margin:0 0 16px">加入我们！</h2>
                        <p style="opacity:.95;max-width:280px">成为林理人才招聘系统的一员，开启智能招聘新时代</p>
                        <button class="btn" id="toSignin" style="margin-top:20px;background:rgba(255,255,255,.2);color:#fff;border:1px solid rgba(255,255,255,.3)">已有账号？ 去登录</button>
                    </div>
                    <div class="left-signin" style="text-align:center;display:none">
                        <h2 style="font-size:32px;margin:0 0 16px">欢迎回来！</h2>
                        <p style="opacity:.95;max-width:280px">很高兴再次见到你！ 欢迎回到系统。</p>
                        <button class="btn" id="toSignup" style="margin-top:20px;background:rgba(255,255,255,.2);color:#fff;border:1px solid rgba(255,255,255,.3)">还没有账号？ 去注册</button>
                    </div>
                </aside>
                <!-- 右侧表单容器 -->
                <section style="flex:1;height:100%;padding:32px 24px;overflow:auto;display:flex;flex-direction:column;gap:16px">
                    <div class="section-head" style="margin-bottom:12px">
                        <h2 id="authTitle">注册</h2>
                    </div>
                    <!-- 注册表单（默认显示） -->
                    <form id="signupForm" class="form" method="post" action="{{ url_for('common.auth.sign') }}" style="padding-top:8px">
                        <input type="hidden" name="action" value="signup" />
                        <div class="grid grid-2 gap-6">
                            <label class="field">
                                <span class="label">名</span>
                                <input type="text" name="first_name" placeholder="名" required />
                            </label>
                            <label class="field">
                                <span class="label">姓</span>
                                <input type="text" name="last_name" placeholder="姓" required />
                            </label>
                        </div>
                        <label class="field">
                            <span class="label">公司名称</span>
                            <input type="text" name="company_name" placeholder="公司名称" required />
                        </label>
                        <!-- 主管和员工专用字段 -->
                        <div id="supervisor-employee-fields" style="display: none;">
                            <label class="field">
                                <span class="label">部门</span>
                                <input type="text" name="department" placeholder="部门名称" />
                            </label>
                            <label class="field">
                                <span class="label">职位</span>
                                <input type="text" name="position" placeholder="职位" />
                            </label>
                        </div>
                        <!-- 员工专用字段 -->
                        <div id="employee-fields" style="display: none;">
                            <label class="field">
                                <span class="label">员工编号</span>
                                <input type="text" name="employee_id" placeholder="员工编号" />
                            </label>
                            <label class="field">
                                                        <span class="label">高管邮箱</span>
                        <input type="email" name="supervisor_email" placeholder="高管邮箱" />
                            </label>
                            <label class="field">
                                <span class="label">入职日期</span>
                                <input type="date" name="hire_date" />
                            </label>
                        </div>
                        <label class="field">
                            <span class="label">邮箱</span>
                            <input type="email" name="email" placeholder="邮箱" required />
                        </label>
                        <div class="grid grid-2 gap-6">
                            <label class="field">
                                <span class="label">手机号</span>
                                <input type="tel" name="phone_number" placeholder="手机号" required />
                            </label>
                            <label class="field">
                                <span class="label">生日</span>
                                <input type="date" name="birthday" required />
                            </label>
                        </div>
                        <div class="grid grid-2 gap-6">
                            <label class="field">
                                <span class="label">密码</span>
                                <input type="password" name="password" placeholder="密码" required />
                            </label>
                            <label class="field">
                                <span class="label">确认密码</span>
                                <input type="password" name="confirm_password" placeholder="确认密码" required />
                            </label>
                        </div>
                        <div class="field" style="margin-top:8px">
                            <span class="label">身份选择 <span style="color: red;">*</span></span>
                            <div class="role-row">
                                <label><input type="radio" name="role" value="candidate" required /> 求职者</label>
                                <label><input type="radio" name="role" value="recruiter" required /> 招聘者（HR）</label>
                                <label><input type="radio" name="role" value="executive" required /> 高管</label>
                                <label><input type="radio" name="role" value="employee" required /> 员工</label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%">注册</button>
                    </form>
                    <!-- 登录表单 -->
                    <form id="signinForm" class="form" method="post" action="{{ url_for('common.auth.sign') }}" style="display:none;padding-top:8px">
                        <input type="hidden" name="action" value="signin" />
                        <label class="field">
                            <span class="label">邮箱</span>
                            <input type="email" name="email" placeholder="邮箱" required />
                        </label>
                        <label class="field">
                            <span class="label">密码</span>
                            <input type="password" name="password" placeholder="密码" required />
                        </label>
                        <div class="field" style="margin-top:8px">
                            <span class="label">以身份登录 <span style="color: red;">*</span></span>
                            <div class="role-row">
                                <label><input type="radio" name="role" value="candidate" required /> 求职者</label>
                                <label><input type="radio" name="role" value="recruiter" required /> 招聘者（HR）</label>
                                <label><input type="radio" name="role" value="executive" required /> 高管</label>
                                <label><input type="radio" name="role" value="employee" required /> 员工</label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary" style="width:100%; margin-top:16px; color: black;">登录</button>
                    </form>
                </section>
            </div>
        </div>
    </div>

    <!-- Scroll To Top -->
    <button id="scrollTop" class="scroll-top" aria-label="Scroll to top">↑</button>

    <!-- 动效背景元素 -->
    <div class="scroll-progress"></div>
    <div class="floating-shapes" id="floatingShapes"></div>
    <div class="animated-bg"><div class="bg-pattern"></div></div>
    <div class="particle-system" id="particleSystem"></div>

    <script src="{{ url_for('static', filename='auth_sign.js') }}"></script>
    <script>
        // 轻量初始化：显示页面渐入
        document.addEventListener('DOMContentLoaded', () => {
            document.body.style.opacity = '1';
            // 散开图标滚动动效
            (function(){
                const section = document.getElementById('scatterSection');
                if(!section) return;
                const icons = Array.from(section.querySelectorAll('.scatter-icon'));
                const center = document.getElementById('scatterCenter');
                const rect = () => section.getBoundingClientRect();

                // 区域范围与随机游走
                const baseRadiusXRatio = 1.10; // 左右范围≈原来2倍
                const baseRadiusYRatio = 0.68;  // 垂直范围同步放大
                const radiusRand  = icons.map(()=> 0.75 + Math.random()*0.5);
                const pos = icons.map(()=> ({x:0, y:0, init:false}));
                const vel = icons.map(()=> ({x:(Math.random()-0.5)*1.2, y:(Math.random()-0.5)*1.2}));
                // 点击图标：将速度反向，并给予轻微增益
                icons.forEach((el, i)=>{
                    el.addEventListener('click', (e)=>{
                        // 反向 + 加速-减速动画（easeOutExpo 逐帧衰减）
                        const minKick = 0.6;
                        vel[i].x = -(Math.abs(vel[i].x) > 0.2 ? vel[i].x : (vel[i].x >= 0 ? minKick : -minKick));
                        vel[i].y = -(Math.abs(vel[i].y) > 0.2 ? vel[i].y : (vel[i].y >= 0 ? minKick : -minKick));
                        let boost = 1.8; // 初速度提升
                        const decayStart = performance.now();
                        function decay(now){
                            const t = Math.min(1, (now - decayStart)/600); // 0.6s 衰减
                            const ease = 1 - Math.pow(2, -8 * t); // easeOutExpo 近似
                            const scale = 1 + (boost - 1) * (1 - ease);
                            vel[i].x *= scale; vel[i].y *= scale;
                            if(t < 1) requestAnimationFrame(decay);
                        }
                        requestAnimationFrame(decay);
                        // 点击波纹
                        const ripple = document.createElement('span');
                        ripple.className = 'click-ripple';
                        el.appendChild(ripple);
                        ripple.addEventListener('animationend', ()=> ripple.remove());
                    });
                });
                const MAX_SPEED = 1.2;
                const MIN_SPEED = 0.25;

                function update(){
                    const r = rect();
                    const vh = window.innerHeight || document.documentElement.clientHeight;
                    // 计算可视比例：区块进入视口中线后开始散开，0->1
                    // 根据启动动画进度计算 eased（0->1）
                    const t = Math.max(0, Math.min(1, (typeof openProgress==='number'? openProgress : 0)));
                    const eased = t*t*(3-2*t); // easeInOut
                    // 设置中心文案透明度
                    if(center){
                        center.style.opacity = String(eased);
                        center.style.transform = `translate(-50%,-50%) scale(${0.92 + 0.08*eased})`;
                    }
                    // 图标从中心向外插值（椭圆 + 缓慢移动）
                    const minDim = Math.min(r.width, r.height);
                    const rx = (r.width)  * baseRadiusXRatio * 0.5;  // 半径取容器宽/高比例
                    const ry = (r.height) * baseRadiusYRatio * 0.5;
                    // 中心文字留白矩形：避免遮挡文字
                    const textClearX = Math.max(220, r.width  * 0.18);
                    const textClearY = Math.max(120, r.height * 0.12);
                    // 预警区（比留白稍大，提前产生斥力）
                    const textWarnX = textClearX * 1.25;
                    const textWarnY = textClearY * 1.25;
                    const innerExclusionX = Math.max(textClearX, minDim * 0.12);
                    const innerExclusionY = Math.max(textClearY, minDim * 0.10);
                    const boundsX = (window.innerWidth || document.documentElement.clientWidth)/2 - 52;  // 左右边界扩展到视口边缘
                    const boundsY = r.height/2 - 72;
                    const boundaryPadding = 37.8; // 约 1cm @96dpi

                    const positions = new Array(icons.length);
                    const sizes = icons.map(el => el.offsetWidth || 96);

                    icons.forEach((el, i)=>{
                        // 初始化分布（随机方向和半径），随后随机游走
                        const rxEff = Math.max(innerExclusionX, rx*radiusRand[i]);
                        const ryEff = Math.max(innerExclusionY, ry*radiusRand[i]);
                        if(!pos[i].init){
                            const a = Math.random()*Math.PI*2;
                            const kx = (Math.cos(a) * rxEff);
                            const ky = (Math.sin(a) * ryEff);
                            pos[i].x = kx * (0.6 + Math.random()*0.4);
                            pos[i].y = ky * (0.6 + Math.random()*0.4);
                            pos[i].init = true;
                        }
                        // 随机扰动速度
                        vel[i].x += (Math.random()-0.5)*0.08;
                        vel[i].y += (Math.random()-0.5)*0.08;
                        // 速度限幅
                        const sp = Math.hypot(vel[i].x, vel[i].y) || 0.001;
                        const clamped = Math.max(MIN_SPEED, Math.min(MAX_SPEED, sp));
                        vel[i].x = vel[i].x / sp * clamped;
                        vel[i].y = vel[i].y / sp * clamped;
                        // 位置更新
                        pos[i].x += vel[i].x;
                        pos[i].y += vel[i].y;
                        // 中心文字提前远离：对预警区内/附近的点持续施加斥力
                        const ax = pos[i].x;
                        const ay = pos[i].y;
                        const insideWarn = Math.abs(ax) < textWarnX && Math.abs(ay) < textWarnY;
                        if(insideWarn){
                            // 基于距离中心的归一化向量施加力
                            const nx = (ax === 0 ? (Math.random() - 0.5) : ax) / (Math.abs(ax) + 1e-3);
                            const ny = (ay === 0 ? (Math.random() - 0.5) : ay) / (Math.abs(ay) + 1e-3);
                            // 强度：越靠近中心越强
                            const px = 1 - Math.min(1, Math.abs(ax) / textWarnX);
                            const py = 1 - Math.min(1, Math.abs(ay) / textWarnY);
                            const force = 0.8 * Math.max(px, py); // 0~0.8
                            vel[i].x += nx * force;
                            vel[i].y += ny * force;
                        }
                        // 严格留白区域内，立即弹出
                        const insideClear = Math.abs(ax) < textClearX && Math.abs(ay) < textClearY;
                        if(insideClear){
                            const nx = (ax === 0 ? (Math.random() - 0.5) : ax) / (Math.abs(ax) + 1e-3);
                            const ny = (ay === 0 ? (Math.random() - 0.5) : ay) / (Math.abs(ay) + 1e-3);
                            pos[i].x = Math.sign(nx) * textClearX;
                            pos[i].y = Math.sign(ny) * textClearY;
                            vel[i].x += nx * 1.2;
                            vel[i].y += ny * 1.2;
                        }
                        // 边界反弹
                        if(pos[i].x > boundsX || pos[i].x < -boundsX){ vel[i].x *= -1; pos[i].x = Math.max(-boundsX, Math.min(boundsX, pos[i].x)); }
                        if(pos[i].y > boundsY || pos[i].y < -boundsY){ vel[i].y *= -1; pos[i].y = Math.max(-boundsY, Math.min(boundsY, pos[i].y)); }
                        // 吸附回许可半径内（防止长时间漂到内圈）
                        pos[i].x = Math.max(-rxEff, Math.min(rxEff, pos[i].x));
                        pos[i].y = Math.max(-ryEff, Math.min(ryEff, pos[i].y));
                        let x = pos[i].x;
                        let y = pos[i].y;
                        // 边界限制，留出约1cm安全距离
                        x = Math.max(-boundsX + boundaryPadding, Math.min(boundsX - boundaryPadding, x));
                        y = Math.max(-boundsY + boundaryPadding, Math.min(boundsY - boundaryPadding, y));
                        positions[i] = {x, y};
                    });

                    // 简单碰撞分离，避免图标互相遮挡（2-3 次迭代即可）
                    for(let iter=0; iter<3; iter++){
                        for(let i=0; i<positions.length; i++){
                            for(let j=i+1; j<positions.length; j++){
                                const pi = positions[i];
                                const pj = positions[j];
                                const rMin = (sizes[i]+sizes[j]) * 0.48 + 37.8; // 再额外加 ~1cm 分隔
                                const dx = pj.x - pi.x;
                                const dy = pj.y - pi.y;
                                const dist = Math.hypot(dx, dy) || 0.001;
                                if(dist < rMin){
                                    const overlap = (rMin - dist) * 0.52; // 分离强度
                                    const nx = dx / dist;
                                    const ny = dy / dist;
                                    pi.x -= nx * overlap;
                                    pi.y -= ny * overlap;
                                    pj.x += nx * overlap;
                                    pj.y += ny * overlap;
                                    // 远离中心文字的轴向推力，强化不遮字
                                    if(Math.abs(pi.x) < textClearX && Math.abs(pi.y) < textClearY){ pi.x += Math.sign(pi.x||1)*6; pi.y += Math.sign(pi.y||1)*6; }
                                    if(Math.abs(pj.x) < textClearX && Math.abs(pj.y) < textClearY){ pj.x += Math.sign(pj.x||1)*6; pj.y += Math.sign(pj.y||1)*6; }
                                    // 再次边界限制
                                    pi.x = Math.max(-boundsX, Math.min(boundsX, pi.x));
                                    pi.y = Math.max(-boundsY, Math.min(boundsY, pi.y));
                                    pj.x = Math.max(-boundsX, Math.min(boundsX, pj.x));
                                    pj.y = Math.max(-boundsY, Math.min(boundsY, pj.y));
                                }
                            }
                        }
                    }

                    // 应用位置
                    icons.forEach((el, i)=>{
                        const tx = positions[i].x * eased;
                        const ty = positions[i].y * eased;
                        el.style.transform = `translate(calc(-50% + ${tx}px), calc(-50% + ${ty}px)) scale(${0.9 + 0.1*eased})`;
                    });
                }

                // 启动即四散：初始滚动进度设为 1，使进入页面直接展开
                // 启动控制：500ms 延迟后触发一次 0->1 的展开动画；
                // 离开视口后重置，再次进入时重新展开
                let openProgress = 0; // 0 折叠 -> 1 展开
                const openDurationMs = 800;
                let opening = false;
                let openedOnce = false;

                function easeInOut(t){ return t*t*(3-2*t); }

                function startOpen(){
                    if(opening) return;
                    opening = true;
                    const t0 = performance.now();
                    function tick(now){
                        const p = Math.min(1, (now - t0) / openDurationMs);
                        openProgress = p;
                        if(p < 1){ requestAnimationFrame(tick); }
                        else { opening = false; openedOnce = true; }
                    }
                    requestAnimationFrame(tick);
                }

                const wrap = document.getElementById('scatterSection');
                setTimeout(()=>{ if(wrap){ wrap.classList.add('ready'); startOpen(); } }, 500);

                // 视口进入/离开时再次触发展开
                if('IntersectionObserver' in window && wrap){
                    const io = new IntersectionObserver(entries =>{
                        entries.forEach(e=>{
                            if(e.isIntersecting){
                                if(!openedOnce){ startOpen(); }
                            } else {
                                // 离开后重置为未展开，下次进入再动画
                                openProgress = 0; opening = false; openedOnce = false;
                            }
                        })
                    }, { threshold: 0.45 });
                    io.observe(wrap);
                }

                // RAF 循环
                function loop(){ update(); requestAnimationFrame(loop); }
                window.addEventListener('resize', update);
                window.addEventListener('scroll', update, {passive:true});
                loop();
            })();
            
            // 动态显示/隐藏字段
            const roleInputs = document.querySelectorAll('input[name="role"]');
            const supervisorEmployeeFields = document.getElementById('supervisor-employee-fields');
            const employeeFields = document.getElementById('employee-fields');
            
            function toggleFields() {
                const selectedRole = document.querySelector('input[name="role"]:checked').value;
                
                if (selectedRole === 'executive') {
                    supervisorEmployeeFields.style.display = 'block';
                    employeeFields.style.display = 'none';
                    // 设置高管字段为必填
                    supervisorEmployeeFields.querySelectorAll('input').forEach(input => {
                        input.required = true;
                    });
                    employeeFields.querySelectorAll('input').forEach(input => {
                        input.required = false;
                    });
                } else if (selectedRole === 'employee') {
                    supervisorEmployeeFields.style.display = 'block';
                    employeeFields.style.display = 'block';
                    // 设置所有字段为必填
                    supervisorEmployeeFields.querySelectorAll('input').forEach(input => {
                        input.required = true;
                    });
                    employeeFields.querySelectorAll('input').forEach(input => {
                        input.required = true;
                    });
                } else {
                    supervisorEmployeeFields.style.display = 'none';
                    employeeFields.style.display = 'none';
                    // 设置字段为非必填
                    supervisorEmployeeFields.querySelectorAll('input').forEach(input => {
                        input.required = false;
                    });
                    employeeFields.querySelectorAll('input').forEach(input => {
                        input.required = false;
                    });
                }
            }
            
            // 监听角色选择变化
            roleInputs.forEach(input => {
                input.addEventListener('change', toggleFields);
            });
            
            // 初始化字段状态
            toggleFields();
            
            // 表单验证
            const signupForm = document.getElementById('signupForm');
            const signinForm = document.getElementById('signinForm');
            
            // 注册表单验证
            signupForm.addEventListener('submit', function(e) {
                const selectedRole = document.querySelector('input[name="role"]:checked');
                if (!selectedRole) {
                    e.preventDefault();
                    alert('请选择注册身份！');
                    return false;
                }
            });
            
            // 登录表单验证
            signinForm.addEventListener('submit', function(e) {
                const selectedRole = document.querySelector('input[name="role"]:checked');
                if (!selectedRole) {
                    e.preventDefault();
                    alert('请选择登录身份！');
                    return false;
                }
            });
        });
    </script>
</body>
</html>
