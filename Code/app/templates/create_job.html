{% extends 'base.html' %}

{% block title %}创建岗位{% endblock %}

{% block content %}
<div class="create-job">
    <div class="title">
        <i class="uil uil-briefcase"></i>
        <span class="text">创建岗位</span>
    </div>
    <form action="{{ url_for('main.create_job') }}" method="post">
        <div class="form-group">
            <label for="job-title">职位名称</label>
            <input type="text" id="job-title" name="title" placeholder="请输入职位名称" required>
        </div>
        <div class="form-group">
            <label for="job-description">职位描述</label>
            <textarea id="job-description" name="description" placeholder="请输入职位描述（支持 Markdown）" required></textarea>
        </div>
        <div class="form-group">
            <label for="job-location">工作地点</label>
            <select id="job-location" name="location" required>
                <option value="" disabled selected>请选择工作地点</option>
            </select>
        </div>
        <div class="form-group">
            <label for="job-salary">薪资</label>
            <input type="number" id="job-salary" name="salary" placeholder="请输入薪资" required step="0.01">
        </div>
        <button type="submit">创建</button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const locationSelect = document.getElementById('job-location');

        fetch('https://restcountries.com/v3.1/all')
            .then(response => response.json())
            .then(data => {
                // Sort countries alphabetically
                data.sort((a, b) => a.name.common.localeCompare(b.name.common));

                data.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country.name.common;
                    option.textContent = country.name.common;
                    locationSelect.appendChild(option);
                });
            })
            .catch(error => console.error('Error fetching country data:', error));
    });
</script>
{% endblock %}
